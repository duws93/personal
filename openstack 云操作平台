openstack 云操作平台

主旨:帮助组织运行为虚拟机或存储服务的云。

openstack为虚拟机提供并管理四大资源：
计算(代号Nova)，网络(代号Neutron)和存储(代号Swift),镜像服务(代号Glance)

openstack的服务

基本管理服务：Keystone,Glance,Nova,Neutron,Horizon
扩展管理服务：Cinder,Swift,Trove,Heat,Centimeter
管理支持服务：Mysql,Qpid

1：Nova
   管理VM生命周期，是最为核心的服务
2: Neutron
	 提供网络链接服务，负责创建和管理L2,L3网络，为VM提供虚拟网络和物理网络连接
3：Glance
	 管理VM的启动镜像，Nova创建VM时使用Glance提供的镜像
4: Cinder
   为VM提供块存储服务，Cinder提供每一个Volume在VM看来就是一块虚拟硬盘，一般用作数据盘
5: Swift
	 提供对象存储服务，VM可以通过RESTFUL api存放对象数据。Glance的镜像存放在Swift，Cinder的volume备份到swift中
6: Keystone
	 通过服务的认证和权限管理服务，openstack上的操作通过keyStone审核
7: Centimeter
	 通过监控和计量服务，为报警，统计和计算通过数据进行分析，在一定的条件
	 下触发相应的动作。
8: Horizon
	 控制台服务，为openstack用户通过一个web的自服务窗口
9：Trove
	 提供管理数据库节点的Trove相关，同时提供Trove在Horizon管理板块
10: Heat
	 提供了基于模板来实现云环境中资源的初始化，依赖关系处理，部署等
	 操作，也可以解决自动收缩，负载均衡等高级特性。
	 
Nova是管理计算资源
Neutron管理网络资源
Glance为vm通过OS镜像，属于存储范畴
Cinder提供块存储，通常做数据盘
Swift提供对象存储
Keystone是认证服务
Ceilmeter是监控服务
Horizon是通过操作界面



私有云架构规划
目标：
1：提供物理资源的利用率
2：一套云管理系统，降低运维的复杂度，提供效率
3：构建灵活的开发，测试集成环境
4：提供海量的存储体系
5：建立完善的监控体系
6：建立基础应用环境，方便测试
7：统一架构
8：智能资源调度

openstack 是由控制节点，计算节点，网络节点，存储节点组成
控制节点负责对其余节点的控制，包含虚拟机建立，迁移，网络分配，存储分配
计算节点负责虚拟机运行
网络节点负责对外网络与内部网络通信
存储节点负责对虚拟机的额外存储管理

控制节点架构：
  提供的服务：
    管理支持服务
    基础管理服务
    扩展管理服务
  1：管理支持服务包含Mysql和Qpid两个服务
  Mysql：数据库作为基础/扩展服务产生的数据存放的地方
  Qpid：消息代理为其他服务之间提供统一的消息处理服务

网络节点架构：
  提供的服务：
    仅包含Neutron服务
  Neutron:负责管理私有网段与公有网段的通信，已经管理
  虚拟机网络之间的通信/拓扑，管理虚拟机之上的防火墙等
  网络节点包含三个网络端口：
  eth0:用于与控制节点进行通信
  eth1:用于与除控制节点外其他节点的计算/存储节点之间的通信
  eth2:用于外部的虚拟机与相应的网络之间的通信
  
计算节点架构：
  提供的服务：
    包含Noval，Neutron，Telemeter三个服务
  计算节点至少包含两个网络端口:
  eth0:与控制节点进行通信，受控制节点统一调配
  eth1:与网络节点，存储节点进行通信
  
  
存储节点架构：
  提供的服务：
    Cinder,Swift等服务
  存储节点至少包含两个网络端口：
  eth0:与控制节点进行通信，接受控制节点任务，由控制节点统一调配
  eth1:与计算/网络节点进行通信，完成控制节点下发的各类任务
  
virt-sysprep--虚拟机执行清理命令的工具
virt-sparsify--处理qcow2类型镜像上出现的大量连续的相同空洞，以此来减少磁盘
								文件实际占用的存储空间
  
openstack 创建实例类型
1：row(裸)--原始的格式，支持转换成其他格式的虚拟机更为简洁，省去转换为中间格式，空间使用来说
				更像是磁盘，du -h可直接展示使用，支持在原有的磁盘追加空间。
				但是不支持snapshot
2：qcow2(写时复制)--主流的虚拟化磁盘格式，更小的存储空间，支持写时复制，支持多snapshot，
          支持磁盘的压缩，支持AES加密
创建实例时候对于极少使用的镜像应该以QCOW2格式存储在Glance中，但是对于经常用于创建新实例
的镜像，或者卷支持的实例的镜像，使用RAW能够提供更好的性能